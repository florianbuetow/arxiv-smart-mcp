rules:
  - id: xrag.no-default-parameter-values
    languages: [python]
    message: >
      Default parameter values hide configuration errors. Use explicit required parameters
      and validate at the call site instead or raise an error when a parameter unexpectedly is missing or not set.
    severity: ERROR
    pattern-either:
      - pattern: |
          def $FUNC(..., $PARAM=$DEFAULT, ...):
              ...
      - pattern: |
          async def $FUNC(..., $PARAM=$DEFAULT, ...):
              ...
    paths:
      include:
        - src/
      exclude:
        - tests/

  - id: xrag.no-dict-get-with-default
    languages: [python]
    message: >
      Using .get() with a default value hides missing configuration. Access the key
      directly or use explicit validation instead or raise an error when the value is expected but missing.
    severity: ERROR
    pattern: $DICT.get($KEY, $DEFAULT)
    paths:
      include:
        - src/
      exclude:
        - tests/

  - id: xrag.no-pydantic-field-default
    languages: [python]
    message: >
      Default values in Pydantic Field() hide configuration errors. Use Field(...)
      without default= to keep fields required, or use explicit optional types with
      None if the field is truly optional.
    severity: ERROR
    pattern: $FIELD = Field(..., default=..., ...)
    paths:
      include:
        - src/
      exclude:
        - tests/
